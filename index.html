<!DOCTYPE html>
<html>
<head>
    <title>Site Locations</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f5f5f7;
            color: #1d1d1f;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        h1 {
            font-weight: 600;
            margin: 20px 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        label {
            font-size: 16px;
            font-weight: 500;
        }
        select {
            font-size: 16px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
            background: #fff;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        select:hover {
            border-color: #007aff;
        }
        #map {
            height: 500px;
            width: 100%;
            margin-top: 20px;
            border-radius: 12px;
        }
    </style>
    <script>
        function loadScript() {
            const apiKey = 'AIzaSyDM5PYHiEkRV4tCdBpP7tKrRtobVXoCzSo';
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
            script.async = true;
            script.defer = true;
            script.onerror = function() {
                console.error('Google Maps script failed to load. Check API key and network connection.');
                alert('Failed to load Google Maps. Please check the API key or internet connection.');
            };
            document.head.appendChild(script);
        }

        let map;
        let markers = [];
        
        function initMap() {
            if (typeof google === 'undefined' || !google.maps) {
                console.error('Google Maps API failed to load.');
                alert('Google Maps failed to load. Please check API key permissions.');
                return;
            }

            map = new google.maps.Map(document.getElementById('map'), {
                zoom: 7,
                center: { lat: -27.5, lng: 153.0 },
                styles: [
                    { elementType: 'geometry', stylers: [{ color: '#f5f5f7' }] },
                    { elementType: 'labels.text.fill', stylers: [{ color: '#1d1d1f' }] },
                    { elementType: 'labels.text.stroke', stylers: [{ color: '#ffffff' }] }
                ]
            });

            addMarkers('All');
        }
        
        const locations = [
            { name: "KFC Acacia Ridge", lat: -27.587525, lng: 153.0274054, type: "KFC" },
            { name: "KFC Albany Creek", lat: -27.3453735, lng: 152.964313, type: "KFC" },
            { name: "KFC Annandale", lat: -19.3167581, lng: 146.7924434, type: "KFC" },
            { name: "Taco Bell Annerley", lat: -27.5147084, lng: 153.0309904, type: "Taco Bell" },
            { name: "Taco Bell Beenleigh", lat: -27.7163846, lng: 153.2065469, type: "Taco Bell" },
            { name: "Taco Bell Cleveland", lat: -27.5241674, lng: 153.2525786, type: "Taco Bell" },
        ];

        function addMarkers(filter) {
            clearMarkers();
            
            locations.forEach(function(location) {
                if (filter === 'All' || location.type === filter) {
                    let marker = new google.maps.Marker({
                        position: { lat: location.lat, lng: location.lng },
                        map: map,
                        title: location.name,
                        icon: "https://maps.google.com/mapfiles/kml/shapes/cycling.png"
                    });
                    markers.push(marker);
                }
            });
        }

        function clearMarkers() {
            markers.forEach(marker => marker.setMap(null));
            markers = [];
        }
    </script>
</head>
<body onload="loadScript()">
    <div class="container">
        <h1>Map of KFC and Taco Bell Locations</h1>
        <label for="filter">Filter by:</label>
        <select id="filter" onchange="addMarkers(this.value)">
            <option value="All">All</option>
            <option value="KFC">KFC</option>
            <option value="Taco Bell">Taco Bell</option>
        </select>
        <div id="map"></div>
    </div>
</body>
</html>
